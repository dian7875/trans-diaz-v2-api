<html>
  <head>
    <meta charset='UTF-8' />
    <title>Cotización</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        font-size: 12px;
        margin: 24px;
        color: #333;
      }

      header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 24px;
      }

      h1 {
        font-size: 19px;
        margin: 0;
      }

      h2 {
        font-size: 14px;
        margin: 2px 0;
        font-weight: normal;
      }

      .company-info {
        display: flex;
        flex-direction: column;
        gap: 2px;
      }

      .logo {
        max-width: 180px;
        max-height: 120px;
      }

      .section {
        margin-top: 20px;
      }

      .section-title {
        font-weight: bold;
        margin-bottom: 6px;
        border-bottom: 1px solid #ddd;
        padding-bottom: 4px;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
      }

      th,
      td {
        border: 1px solid #ddd;
        padding: 6px;
        text-align: left;
      }

      th {
        background-color: #f6f6f6;
        font-size: 10.5px;
      }

      .right {
        text-align: right;
      }

      .totals {
        margin-top: 10px;
        width: 40%;
        margin-left: auto;
      }

      .totals td {
        border: none;
        padding: 4px 6px;
      }

      .totals .label {
        text-align: right;
        font-weight: bold;
      }

      .totals .value {
        text-align: right;
      }

      .notes {
        margin-top: 24px;
        font-size: 11px;
      }

      .footer {
        margin-top: 40px;
        font-size: 11px;
        color: #666;
        text-align: center;
      }

      .client-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 6px 20px;
        font-size: 11px;
      }

      .client-grid .full {
        grid-column: span 2;
      }
    </style>

  </head>

  <body>
    <header>
      <div class='company-info'>
        <h1>Transportes Díaz</h1>
        <h2>Amelia Díaz Baltonado</h2>
        <h2>Cédula: 503090276</h2>
        <h2>Tel: 6068-5039</h2>
        <h2>Correo: gastos13diaz@gmail.com</h2>
      </div>

      <img src='{{baseUrl}}' alt='Logo' class='logo' />
    </header>

    <div class='section'>
      <div class='section-title'>Cotización</div>
      <p><strong>Fecha:</strong> {{quotationDate}}</p>
    </div>

    <div class='section'>
      <div class='section-title'>Datos del cliente</div>

      <div class='client-grid'>
        <div><strong>Nombre:</strong> {{client.clientName}}</div>

        {{#if client.clientBillerId}}
          <div><strong>Cédula:</strong> {{client.clientBillerId}}</div>
        {{/if}}

        {{#if client.clientEmail}}
          <div><strong>Correo:</strong> {{client.clientEmail}}</div>
        {{/if}}

        {{#if client.clientPhone}}
          <div><strong>Teléfono:</strong> {{client.clientPhone}}</div>
        {{/if}}

        {{#if client.clientDirecction}}
          <div class='full'>
            <strong>Dirección:</strong>
            {{client.clientDirecction}}
          </div>
        {{/if}}
      </div>
    </div>

    <div class='section'>
      <div class='section-title'>Detalle del servicio</div>

      <table>
        <thead>
          <tr>
            <th>Descripción</th>
            <th class='right'>Monto sin IVA</th>
            <th class='right'>IVA</th>
            <th class='right'>Monto con IVA</th>
          </tr>
        </thead>
        <tbody>
          {{#each items}}
            <tr>
              <td>{{this.description}}</td>
              <td class='right'>₡ {{formatCurrency this.noIVAmount}}</td>
              <td class='right'>₡ {{formatCurrency this.IVAmount}}</td>
              <td class='right'>₡ {{formatCurrency this.withIVAmount}}</td>
            </tr>
          {{/each}}
        </tbody>
      </table>

      <table class='totals'>
        <tr>
          <td class='label'>Subtotal:</td>
          <td class='value'>₡ {{formatCurrency totals.totalNoIVAmount}}</td>
        </tr>
        <tr>
          <td class='label'>IVA:</td>
          <td class='value'>₡ {{formatCurrency totals.totalIVAmount}}</td>
        </tr>
        <tr>
          <td class='label'>Total:</td>
          <td class='value'>
            <strong>₡ {{formatCurrency totals.totalWithIVAmount}}</strong>
          </td>
        </tr>
      </table>
    </div>

    <div class='notes'>
      {{#if notes}}
        <strong>Observaciones:</strong>
        <p>{{notes}}</p>
      {{/if}}

      <p><strong>Validez de la cotización:</strong> {{validityDays}} días</p>
    </div>

    <div class='footer'>
      Esta cotización no constituye una factura.<br />
      Los montos pueden ajustarse según condiciones del servicio.<br />
      Transportes Díaz.
    </div>
  </body>
</html>